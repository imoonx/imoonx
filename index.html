<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,  maximum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <title>xuan | imoonx.com</title>
</head>

<body style="background: #f0f0f0">

    <audio id="bg-music" src="music/であい-まつい_ようへい_ミト-201803.mp3" loop="loop" hidden="true" autoplay></audio>

    <div class="header bg-white">
        <img src="img/header.jpg" />
        <svg id="ice-bear" xmlns="http://www.w3.org/2000/svg" version="1.1" width="80%" height="200%" viewBox="0 0 800 400">
            <g id="welcom-text" style="text-shadow: 1px 1px #EFEFEF, 2px 2px #ccc">
                <text x="50" y="130" fill="#ed5565" font-size="100">W</text>
                <text x="160" y="180" fill="#f4b350" font-size="100">E</text>
                <text x="230" y="140" fill="#f2db94" font-size="130">L</text>
                <text x="310" y="160" fill="#62ddbd" font-size="100">C</text>
                <text x="400" y="160" fill="#62B3E5" font-size="90">O</text>
                <text x="480" y="160" fill="#ec87c0" font-size="120">M</text>
                <text x="600" y="160" fill="#b3aeef" font-size="100">e</text>
            </g>
        </svg>
    </div>

    <div class="music_play" onclick="play()"></div>

    <div class="container content">

        <div class="row">
            <div class="col-sm-4 columns">
                <div class="columns-item">
                    <!-- top -->
                    <div class="item-thumb bg-white"></div>

                    <div class="item-desc">
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                    </div>

                    <div class="item-slant reverse-slant bg-white"></div>
                    <div class="item-slant">
                        <div class="liberxue-title">
                            音乐
                        </div>
                    </div>
                    <!-- bottom -->
                    <div class="columns-item-bottom">
                        <div class="columns-item-bottom-title">
                            <a href="music.html?id=0" class="href_music">雨天-戚薇</a>
                        </div>
                        <div class="columns-item-bottom-time">
                            <a href="javascript:volid(0);" data-hover="2017-07-30 10:06">2017-07-30 10:06</a>
                            <img class="_music" />
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-sm-4 columns">
                <div class="columns-item">
                    <!-- top -->
                    <div class="item-thumb bg-green"></div>

                    <div class="item-desc">
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                    </div>

                    <div class="item-slant reverse-slant bg-green"></div>

                    <div class="item-slant">
                        <div class="liberxue-title">
                            音乐
                        </div>
                    </div>
                    <!-- bottom -->
                    <div class="columns-item-bottom">
                        <div class="columns-item-bottom-title">
                            <a href="music.html?id=1" class="href_music">遇见-张瑶</a>
                        </div>
                        <div class="columns-item-bottom-time">
                            <a href="javascript:volid(0);" data-hover="2017-07-30 10:06">2017-07-30 10:06</a>
                            <img class="_trip" />
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-sm-4 columns">
                <div class="columns-item">
                    <!-- top -->
                    <div class="item-thumb bg-orange"></div>

                    <div class="item-desc">
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                        <p>最讨厌的雨天</p>
                    </div>

                    <div class="item-slant reverse-slant bg-orange"></div>

                    <div class="item-slant">
                        <div class="liberxue-title">
                            音乐
                        </div>
                    </div>
                    <!-- bottom -->
                    <div class="columns-item-bottom">
                        <div class="columns-item-bottom-title">
                            <a href="html/rain.html">遇见-张瑶</a>
                        </div>
                        <div class="columns-item-bottom-time">
                            <a href="music.html?id=2" data-hover="2017-07-30 10:06">2017-07-30 10:06</a>
                            <img class="_article" />
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery-3.3.1.js "></script>
    <script src="js/bootstrap.js "></script>
    <script src="js/style.js"></script>
    <script>
        var audio;

        $(function () {
            if (!isMobile.any()) {
                $(".href_music").attr("target", "_blank");
            }
            audio = document.getElementById("bg-music");
            audio.addEventListener('play', playMusic); // 开始播放了
            audio.addEventListener('pause', pauseMusic); // 暂停
            autoPlayMusic();
            var userAgent = navigator.userAgent;
            if (userAgent.indexOf("Firefox") > -1 || userAgent.indexOf("Edge") > -1) {
                $(".music_play").addClass("music_pause");
            }
        })

        //播放暂停
        function playMusic() {
            console.log("playMusic");
            $(".music_play").addClass("music_pause");
        }

        //暂停
        function pauseMusic() {
            console.log("pauseMusic");
            $(".music_play").removeClass("music_pause");
        }

        function play() {
            //播放
            if (audio.paused) {
                audio.play();
            } else {
                audio.pause();
            }
        }

        // 音乐播放
        function autoPlayMusic() {
            // 自动播放音乐效果，解决浏览器或者APP自动播放问题 
            // document.body.addEventListener('touchstart', musicInBrowserHandler);
            // function musicInBrowserHandler() {
            //     document.getElementById("bg-music").play();
            //     document.body.removeEventListener('touchstart', musicInBrowserHandler);
            // }

            // 自动播放音乐效果，解决微信自动播放问题 
            document.addEventListener("WeixinJSBridgeReady", musicInWeixinHandler);

            function musicInWeixinHandler() {
                document.getElementById("bg-music").play();
                // $("#operaMusic").attr("src", "img/paused.svg");
                document.removeEventListener("WeixinJSBridgeReady", musicInWeixinHandler);
            }
        }
    </script>

</body>

</html>